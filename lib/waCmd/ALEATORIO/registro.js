import{createHash as e}from"crypto";import{getDate as t}from"../../calendario.js";import{mapNet as a}from"../../funciones.js";const r=["rgfecha","rgnombre","rgedad","registrado"],n=/([^a-z0-9áéíóúñ :._\-\n]+)/gi;export default{comando:{clave:["rg","reg","unreg","unrg"]},nk:async(o,{conn:{fetchStatus:i,profilePictureUrl:s,sendMessage:g}})=>{const{zZz:{Ureg:c},groupMetadata:{participants:l},codex:d,args:p,chat:u,sender:m,command:h,senderNum:f,reply:b,reacMoji:N}=o,$=global.db.wulid[m]||global.db.wunet[m],{registrado:w}=$||{},{fechaCompleta:x,epoca:y}=t(m),M=a(l);if(["unreg","unrg"].includes(h)){const t=e("md5").update(m).digest("hex");return p[0]?p[0]!==t?b(c()[1]):($.registrado=!1,b(c()[2])):b(c()[0])}if(w)return b(c()[3]);if(!d||!d.includes("-"))return b(c()[4+(d?1:0)]);const[j,k]=[d.split("-")[0].replace(n,""),Math.round(d.split("-").pop())||NaN];if(isNaN(k)||j?.length>=15||k>31||k<12)return b(c()[5+(isNaN(k)?1:j?.length>=15?2:k>31?3:4)]);await N("📝");const z=await i(m).then((e=>e[0]?.status?.status??"~")).catch((e=>"~")),U=k<15?c()[13]:k<18?c()[14]:k<25?c()[15]:c()[16],v=z.length<5?[c()[17],x]:[c()[18],z.length<=27?z:z.substring(0,27)+"..."],C=c(f,j,y-k,U,z,e("md5").update(m).digest("hex"),M[m].split("@")[0])[19],R=await s(m).catch((e=>null)),q=[Date.now(),j,k,!0];for(let e=0;e<r.length;e++)$[r[e]]=q[e];return g(u,{image:{url:`https://latam-api.vercel.app/crearegistro?apikey=${global.db.nk}&rgtext=${c()[10]}&rgname=${c()[11]+j}&rgage=${c()[12]+k+" | "+U}&rgdatext=${v[0].replace(n,"")}&rgdate=${v[1].replace(n,"")}&imagen=${encodeURIComponent(R)}`},caption:C,mentions:[m]},{quoted:o})},cmdRdm:0,onlyGp:!0}; /* @NeKosmic */ 
